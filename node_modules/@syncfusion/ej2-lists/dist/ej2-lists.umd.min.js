/*!
*  filename: ej2-lists.umd.min.js
*  version : 16.2.50
*  Copyright Syncfusion Inc. 2001 - 2018. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-buttons")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-data","@syncfusion/ej2-buttons"],t):t(e.ej={},e.ej2Base,e.ej2Data,e.ej2Buttons)}(this,function(e,t,i,s){"use strict";function n(e,i){var s={};if(t.isNullOrUndefined(e)||"string"==typeof e||"number"==typeof e||!t.isNullOrUndefined(e.isHeader))return e;for(var n=0,r=Object.keys(i);n<r.length;n++){var l=i[r[n]],a=t.isNullOrUndefined(l)||"string"!=typeof l?void 0:t.getValue(l,e);t.isNullOrUndefined(a)||(s[l]=a)}return s}e.cssClass={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper"},function(s){function r(e,t,i,s){return x(e,l(e,t,i,s),null,s)}function l(i,s,n,r){var l=[],a=t.extend({},S,r);e.cssClass=y(a.moduleName);for(var o=I(),c=0;c<s.length;c++)if(!t.isNullOrUndefined(s[c])){var h=void 0;if(a.itemCreating&&"function"==typeof a.itemCreating){var d={dataSource:s,curData:s[c],text:s[c],options:a};a.itemCreating(d)}if(h=n?v(i,s[c],void 0,null,null,[],null,o,c,r):b(i,s[c],void 0,null,null,r),a.itemCreated&&"function"==typeof a.itemCreated){d={dataSource:s,curData:s[c],text:s[c],item:h,options:a};a.itemCreated(d)}l.push(h)}return l}function a(i,r,l,a,c){var h=t.extend({},S,l);e.cssClass=y(h.moduleName);var d,u=t.extend({},s.defaultMappedFields,h.fields),f=t.extend({},w,h.ariaAttributes);a&&(f.level=a);var g,x=[];r.length&&!p(r).item.hasOwnProperty(u.id)&&(d=I());for(var L=0;L<r.length;L++){var C=n(r[L],u);if(!t.isNullOrUndefined(r[L])){if(h.itemCreating&&"function"==typeof h.itemCreating){var V={dataSource:r,curData:r[L],text:C[u.text],options:h,fields:u};h.itemCreating(V)}var k=r[L];h.itemCreating&&"function"==typeof h.itemCreating&&(C=n(r[L],u)),C.hasOwnProperty(u.id)&&!t.isNullOrUndefined(C[u.id])&&(d=C.id);var O=[];if(h.showCheckBox&&O.push(i("input",{className:e.cssClass.check,attrs:{type:"checkbox"}})),!0===c)h.showIcon&&C.hasOwnProperty(u.iconCss)&&(t.isNullOrUndefined(C[u.iconCss])||O.push(i("span",{className:e.cssClass.icon+" "+C[u.iconCss]}))),g=v(i,k,C,u,h.itemClass,O,!(!k.hasOwnProperty("isHeader")||!k.isHeader),d,L,l);else{if((g=b(i,k,C,u,h.itemClass,l)).classList.add(e.cssClass.level+"-"+f.level),g.setAttribute("aria-level",f.level.toString()),C.hasOwnProperty(u.tooltip)&&g.setAttribute("title",C[u.tooltip]),C.hasOwnProperty(u.htmlAttributes)&&C[u.htmlAttributes]&&m(g,C[u.htmlAttributes]),C.hasOwnProperty(u.enabled)&&!1===C[u.enabled]&&g.classList.add(e.cssClass.disabled),C.hasOwnProperty(u.isVisible)&&!1===C[u.isVisible]&&(g.style.display="none"),C.hasOwnProperty(u.imageUrl)&&!t.isNullOrUndefined(C[u.imageUrl])){var E={src:C[u.imageUrl]};C.hasOwnProperty(u.imageUrl)&&t.merge(E,C[u.imageAttributes]),t.prepend([i("img",{className:e.cssClass.image,attrs:E})],g.firstElementChild)}h.showIcon&&C.hasOwnProperty(u.iconCss)&&!h.template&&(t.isNullOrUndefined(C[u.iconCss])||t.prepend([i("div",{className:e.cssClass.icon+" "+C[u.iconCss]})],g.firstElementChild)),O.length&&t.prepend(O,g.firstElementChild),function(i,s,n,r,l,a,c){var h=s[n.child]||[],d=s[n.hasChildren];if(h.length&&(d=!0,a.classList.add(e.cssClass.hasChild),l.processSubChild)){var u=o(i,h,l,++c);a.appendChild(u)}if(l.expandCollapse&&d&&!l.template){a.firstElementChild.classList.contains(e.cssClass.textContent)&&a.firstElementChild.classList.add(e.cssClass.iconWrapper);var p="Left"===l.expandIconPosition?t.prepend:t.append;p([i("div",{className:"e-icons "+l.expandIconClass})],a.querySelector("."+e.cssClass.textContent))}}(i,C,u,0,h,g,f.level)}if(h.itemCreated&&"function"==typeof h.itemCreated){V={dataSource:r,curData:r[L],text:C[u.text],item:g,options:h,fields:u};h.itemCreated(V)}x.push(g)}}return x}function o(e,i,s,n,r){var l=t.extend({},S,s);return x(e,a(e,i,s,n,r),l.listClass,s)}function c(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function h(e,t,s){if(void 0===s&&(s=new i.Query),"Ascending"===e)s.sortBy(t,"ascending",!0);else if("Descending"===e)s.sortBy(t,"descending",!0);else for(var n=0;n<s.queries.length;n++)"onSortBy"===s.queries[n].fn&&s.queries.splice(n,1);return s}function d(e,t){return new i.DataManager(e).executeLocal(t)}function u(e,i){var n=t.extend({},S,i),r=t.extend({},s.defaultMappedFields,n.fields),l=e.cloneNode(!0),a=[];l.classList.add("json-parent");var o=l.querySelectorAll(".json-parent>li");l.classList.remove("json-parent");for(var c=0;c<o.length;c++){for(var h=o[c],d=h.querySelector("a"),p=h.querySelector("ul"),m={},v=d?d.childNodes:h.childNodes,y=Object.keys(v),g=0;g<v.length;g++)v[Number(y[g])].hasChildNodes()||(m[r.text]=v[Number(y[g])].textContent);m[r.id]=I();var b=f(h);Object.keys(b).length&&(m[r.htmlAttributes]=b),d&&(b=f(d),Object.keys(b).length&&(m[r.urlAttributes]=b)),p&&(m[r.child]=u(p,i)),a.push(m)}return a}function p(e){for(var i={typeof:null,item:null},s=0;s<e.length;s++)if(!t.isNullOrUndefined(e[s]))return i={typeof:typeof e[s],item:e[s]};return i}function m(e,i){var s={};t.merge(s,i),s.class&&(t.addClass([e],s.class.split(" ")),delete s.class),t.attributes(e,s)}function f(e){for(var t={},i=e.attributes,s=0;s<i.length;s++)t[i[s].nodeName]=i[s].nodeValue;return t}function I(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function v(i,s,n,r,l,a,o,c,h,d){var u,p=t.extend({},S,d),f=t.extend({},w,p.ariaAttributes),I=s,v=s;"string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s&&(u=s,I="boolean"==typeof n[r.text]||"number"==typeof n[r.text]?n[r.text]:n[r.text]||"",v=n[r.value]);var y;y=t.isNullOrUndefined(u)||t.isNullOrUndefined(n[r.id])||""===n[r.id]?c+"-"+h:c;var b=i("li",{className:(!0===o?e.cssClass.group:e.cssClass.li)+" "+(t.isNullOrUndefined(l)?"":l),id:y,attrs:""!==f.groupItemRole&&""!==f.itemRole?{role:!0===o?f.groupItemRole:f.itemRole}:{}});return u&&n.hasOwnProperty(r.enabled)&&"false"===n[r.enabled].toString()&&b.classList.add(e.cssClass.disabled),o?b.innerText=I:(t.isNullOrUndefined(v)||b.setAttribute("data-value",v),b.setAttribute("role","option"),u&&n.hasOwnProperty(r.htmlAttributes)&&n[r.htmlAttributes]&&m(b,n[r.htmlAttributes]),a.length&&t.append(a,b),u&&n.hasOwnProperty(r.url)&&n[r.url]?b.appendChild(g(i,u,r,I)):b.appendChild(document.createTextNode(I))),b}function y(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper"}}function g(i,s,r,l){var a=n(s,r),o={href:a[r.url]};a.hasOwnProperty(r.urlAttributes)&&a[r.urlAttributes]&&t.merge(o,a[r.urlAttributes]);var c=i("a",{className:e.cssClass.text+" "+e.cssClass.url,innerHTML:l});return m(c,o),c}function b(i,s,n,r,l,a){var o,c,h,d=t.extend({},S,a),u=t.extend({},w,d.ariaAttributes),p=s;"string"!=typeof s&&"number"!=typeof s&&(h=s,p=n[r.text]||"",o=n[r.id],c=!(!s.hasOwnProperty("isHeader")||!s.isHeader));var m=i("li",{className:(!0===c?e.cssClass.group:e.cssClass.li)+" "+(t.isNullOrUndefined(l)?"":l),attrs:""!==u.groupItemRole&&""!==u.itemRole?{role:!0===c?u.groupItemRole:u.itemRole}:{}});if(t.isNullOrUndefined(o)?m.setAttribute("data-uid",I()):m.setAttribute("data-uid",o),c&&a&&a.groupTemplate){var f=t.compile(a.groupTemplate);t.append(f(s),m)}else if(!c&&a&&a.template){f=t.compile(a.template);t.append(f(s),m)}else{var v=i("div",{className:e.cssClass.textContent,attrs:""!==u.wrapperRole?{role:u.wrapperRole}:{}});h&&n.hasOwnProperty(r.url)&&n[r.url]?v.appendChild(g(i,h,r,p)):v.appendChild(i("span",{className:e.cssClass.text,innerHTML:p,attrs:""!==u.itemText?{role:u.itemText}:{}})),m.appendChild(v)}return m}function x(i,s,n,r){var l=t.extend({},S,r),a=t.extend({},w,l.ariaAttributes);e.cssClass=y(l.moduleName);var o=i("ul",{className:e.cssClass.ul+" "+(t.isNullOrUndefined(n)?"":n),attrs:""!==a.listRole?{role:a.listRole}:{}});return t.append(s,o),o}s.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var w={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},S={showCheckBox:!1,showIcon:!1,expandCollapse:!1,fields:s.defaultMappedFields,ariaAttributes:w,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right"};s.createList=function(e,i,s,n){var l=t.extend({},S,s),a=t.extend({},w,l.ariaAttributes),c=p(i).typeof;return"string"===c||"number"===c?r(e,i,n,s):o(e,i,s,a.level,n)},s.createListFromArray=r,s.createListItemFromArray=l,s.createListItemFromJson=a,s.createListFromJson=o,s.getSiblingLI=function(i,s,n){if(e.cssClass=y(S.moduleName),i&&i.length){var r,l,a=Array.prototype.slice.call(i);for(r=a[(l=s?c(s,a):!0===n?a.length:-1)+(!0===n?-1:1)];r&&(!t.isVisible(r)||r.classList.contains(e.cssClass.disabled));)r=a[l+=!0===n?-1:1];return r}},s.indexOf=c,s.groupDataSource=function(e,t,s){void 0===s&&(s="None");var n=(new i.Query).group(t.groupBy),r=d(e,n=h(s,"key",n));e=[];for(var l=0;l<r.length;l++){var a=r[l].items,o={};o[t.text]=r[l].key,o.isHeader=!0,o.id="group-list-item-"+(r[l].key?r[l].key.toString().trim():"undefined"),o.items=a,e.push(o);for(var c=0;c<a.length;c++)e.push(a[c])}return e},s.addSorting=h,s.getDataSource=d,s.createJsonFromElement=u,s.renderContentTemplate=function(i,s,r,l,a){e.cssClass=y(S.moduleName);for(var o=i("ul",{className:e.cssClass.ul,attrs:{role:"presentation"}}),c=t.extend({},S,a),h=t.compile(s),d=[],u=I(),p=0;p<r.length;p++){var m=n(r[p],l),f=r[p],v=f.isHeader,g="string"==typeof f||"number"==typeof f?f:m[l.value];if(c.itemCreating&&"function"==typeof c.itemCreating){var b={dataSource:r,curData:f,text:g,options:c,fields:l};c.itemCreating(b)}c.itemCreating&&"function"==typeof c.itemCreating&&(g=(m=n(r[p],l))[l.value]);var x=i("li",{id:u+"-"+p,className:v?e.cssClass.group:e.cssClass.li,attrs:{role:"presentation"}});v?x.innerText=m[l.text]:(t.append(h(f),x),x.setAttribute("data-value",g),x.setAttribute("role","option")),c.itemCreated&&"function"==typeof c.itemCreated&&(b={dataSource:r,curData:f,text:g,item:x,options:c,fields:l},c.itemCreated(b)),d.push(x)}return t.append(d,o),o},s.renderGroupTemplate=function(e,i,s,n){for(var r=t.compile(e),l=s.groupBy,a=0,o=n;a<o.length;a++){var c=o[a],h={};h[l]=c.textContent,c.innerHTML="",t.append(r(h),c)}return n},s.generateId=I,s.generateUL=x,s.generateIcon=function(i,s,n,r){var l=t.extend({},S,r);return e.cssClass=y(l.moduleName),("Left"===l.expandIconPosition?t.prepend:t.append)([i("div",{className:"e-icons "+l.expandIconClass+" "+(t.isNullOrUndefined(n)?"":n)})],s.querySelector("."+e.cssClass.textContent)),s}}(e.ListBase||(e.ListBase={}));var r=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),l=function(e,t,i,s){var n,r=arguments.length,l=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,i,l):n(t,i))||l);return r>3&&l&&Object.defineProperty(t,i,l),l},a={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},o={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},c={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",content:"e-content",icon:"e-icons",backIcon:"e-icon-back",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist"},h=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),l([t.Property("id")],i.prototype,"id",void 0),l([t.Property("text")],i.prototype,"text",void 0),l([t.Property("isChecked")],i.prototype,"isChecked",void 0),l([t.Property("isVisible")],i.prototype,"isVisible",void 0),l([t.Property("enabled")],i.prototype,"enabled",void 0),l([t.Property("iconCss")],i.prototype,"iconCss",void 0),l([t.Property("child")],i.prototype,"child",void 0),l([t.Property("tooltip")],i.prototype,"tooltip",void 0),l([t.Property("groupBy")],i.prototype,"groupBy",void 0),l([t.Property("text")],i.prototype,"sortBy",void 0),l([t.Property("htmlAttributes")],i.prototype,"htmlAttributes",void 0),l([t.Property("tableName")],i.prototype,"tableName",void 0),i}(t.ChildProperty),d=function(d){function u(e,t){return d.call(this,e,t)||this}return r(u,d),u.prototype.onPropertyChanged=function(e,i){for(var s=0,n=Object.keys(e);s<n.length;s++){switch(n[s]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(i.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1);break;case"showHeader":this.header(this.headerTitle,!1);break;case"enableVirtualization":t.detach(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"sortOrder":case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},u.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&t.attributes(this.element,this.htmlAttributes)},u.prototype.setCSSClass=function(e){this.cssClass&&t.addClass([this.element],this.cssClass.split(" ")),e&&t.removeClass([this.element],e.split(" "))},u.prototype.setSize=function(){this.element.style.height=t.formatUnit(this.height),this.element.style.width=t.formatUnit(this.width),this.isWindow=!this.element.getBoundingClientRect().height},u.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},u.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},u.prototype.enableElement=function(e,t){t?e.classList.remove(c.disable):e.classList.add(c.disable)},u.prototype.header=function(e,i){if(void 0===this.headerEle&&this.showHeader){this.headerEle=this.createElement("div",{className:c.header});var s=this.createElement("span",{className:c.headerText,innerHTML:this.headerTitle}),n=this.createElement("div",{className:c.text,innerHTML:s.outerHTML}),r=this.createElement("div",{className:c.icon+" "+c.backIcon+" e-but-back",attrs:{style:"display:none;"}});if(this.headerEle.appendChild(r),this.headerEle.appendChild(n),this.headerTemplate){var l=t.compile(this.headerTemplate),a=this.createElement("div",{className:c.headerTemplateText});t.append(l({}),a),t.append([a],this.headerEle)}this.headerTemplate&&this.headerTitle&&n.classList.add("header"),this.element.classList.add("e-has-header"),t.prepend([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";n=this.headerEle.querySelector("."+c.headerText),r=this.headerEle.querySelector("."+c.backIcon);n.innerHTML=e,this.headerTemplate&&i&&(n.parentElement.classList.remove("header"),this.headerEle.querySelector("."+c.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!i&&(n.parentElement.classList.add("header"),this.headerEle.querySelector("."+c.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+c.headerTemplateText).classList.add("header")),r.style.display=!0===i?"":"none"}else this.headerEle.style.display="none"},u.prototype.switchView=function(e,t,i){var s=this;if(e&&t){var n=e.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var l=void 0,c=this.animation.duration;if(this.animation.effect)l=this.enableRtl?o[this.animation.effect]:a[this.animation.effect];else{l=a.SlideLeft,i=this.enableRtl,c=0}this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?l[0]:l[1],duration:c,timingFunction:this.animation.easing,end:function(t){e.style.display="none",s.element.style.overflow=r,e.style.position=n,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?l[2]:l[3],duration:c,timingFunction:this.animation.easing,end:function(){s.trigger("actionComplete")}}),this.curUL=t}},u.prototype.preRender=function(){this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"list",itemText:"",groupItemRole:"group",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this)},this.initialization()},u.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=[],this.aniObj=new t.Animation(this.animateOptions)},u.prototype.renderCheckbox=function(e){if(e.item.classList.contains(c.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var t=void 0;(t=s.createCheckBox(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:c.listviewCheckbox})).setAttribute("role","checkbox");var i=t.querySelector("."+c.checkboxIcon);e.item.classList.add(c.itemCheckList),e.item.firstElementChild.classList.add(c.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?n(e.curData,this.listBaseOption.fields)[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,t):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,t),t.setAttribute("aria-checked",i.classList.contains(c.checked)?"true":"false"),"Left"===this.checkBoxPosition?(t.classList.add(c.checkboxLeft),e.item.firstElementChild.classList.add(c.checkboxLeft),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0])):(t.classList.add(c.checkboxRight),e.item.firstElementChild.classList.add(c.checkboxRight),e.item.firstElementChild.appendChild(t)),this.currentLiElements.push(e.item)}},u.prototype.checkInternally=function(e,t){e.item.classList.add(c.selected),e.item.setAttribute("aria-selected","true"),t.querySelector("."+c.checkboxIcon).classList.add(c.checked),t.setAttribute("aria-checked","true")},u.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},u.prototype.toggleCheckBase=function(e,i){if(this.showCheckBox){var s=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(s=this.getLiFromObjOrElement(e)),!t.isNullOrUndefined(s)){var n=s.querySelector("."+c.checkboxIcon);i?s.classList.add(c.selected):s.classList.remove(c.selected),s.setAttribute("aria-selected",i?"true":"false"),i?n.classList.add(c.checked):n.classList.remove(c.checked),n.parentElement.setAttribute("aria-checked",i?"true":"false")}this.setSelectedItemData(s)}},u.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},u.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},u.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},u.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+c.checkboxIcon);i&&(e?i.classList.contains(c.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(c.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e)}},u.prototype.setCheckbox=function(){var e=this;if(this.showCheckBox){var t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""};Array.prototype.slice.call(this.element.querySelectorAll("."+c.listItem)).forEach(function(i){t.item=i,t.curData=e.getItemData(i),i.querySelector("."+c.checkboxWrapper)&&e.removeElement(i.querySelector("."+c.checkboxWrapper)),e.renderCheckbox(t),t.item.classList.contains(c.selected)&&e.checkInternally(t,t.item.querySelector("."+c.checkboxWrapper))})}else{Array.prototype.slice.call(this.element.querySelectorAll("."+c.itemCheckList)).forEach(function(t){t.classList.remove(c.selected),t.firstElementChild.classList.remove(c.checkbox),e.removeElement(t.querySelector("."+c.checkboxWrapper))}),this.selectedItems&&this.selectedItems.item.classList.add(c.selected)}},u.prototype.clickHandler=function(e){var i=e.target,s=i.classList;if(s.contains(c.backIcon)||s.contains(c.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var n=t.closest(i.parentNode,"."+c.listItem);if(null===n&&(n=i),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(n))if(e.target.classList.contains(c.checkboxIcon)){if(n.classList.add(c.focused),t.isNullOrUndefined(n.querySelector("."+c.checked))){var r={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:n};this.checkInternally(r,r.item.querySelector("."+c.checkboxWrapper))}else this.uncheckItem(n),n.classList.add(c.focused);if(e){var l=this.selectEventData(n,e),a=n.querySelector("."+c.checkboxIcon);t.merge(l,{isChecked:a.classList.contains(c.checked)}),this.trigger("select",l)}}else n.classList.contains(c.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(n),this.setSelectLI(n,e),n.classList.remove(c.selected)):this.setCheckboxLI(n,e);else this.setSelectLI(n,e)}},u.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},u.prototype.hoverHandler=function(e){var i=t.closest(e.target.parentNode,"."+c.listItem);this.setHoverLI(i)},u.prototype.leaveHandler=function(e){this.removeHover()},u.prototype.homeKeyHandler=function(e,t){if(Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelectorAll("."+c.listItem),s=this.curUL.querySelector("."+c.focused)||this.curUL.querySelector("."+c.selected);s&&(s.classList.remove(c.focused),this.showCheckBox||s.classList.remove(c.selected));var n=t?i.length-1:0;i[n].classList.contains(c.hasChild)||this.showCheckBox?i[n].classList.add(c.focused):this.setSelectLI(i[n],e)}},u.prototype.onArrowKeyDown=function(i,s){var n,r;return!t.isNullOrUndefined(this.curUL.querySelector("."+c.hasChild))||this.showCheckBox?(r=this.curUL.querySelector("."+c.focused)||this.curUL.querySelector("."+c.selected),n=e.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+c.listItem),r,s),t.isNullOrUndefined(n)||(r&&(r.classList.remove(c.focused),this.showCheckBox||r.classList.remove(c.selected)),n.classList.contains(c.hasChild)||this.showCheckBox?n.classList.add(c.focused):this.setSelectLI(n,i))):(r=this.curUL.querySelector("."+c.selected),n=e.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+c.listItem),r,s),this.setSelectLI(n,i)),n},u.prototype.arrowKeyHandler=function(e,t){var i=this;if(Object.keys(this.dataSource).length&&this.curUL){var s=this.onArrowKeyDown(e,t),n=this.element.getBoundingClientRect().top,r=this.element.getBoundingClientRect().height,l=this.curUL.querySelector("."+c.listItem).getBoundingClientRect(),a=void 0,o=void 0;if(this.fields.groupBy&&(o=this.curUL.querySelector("."+c.groupListItem).getBoundingClientRect()),s){var h=s.getBoundingClientRect().top,d=s.getBoundingClientRect().height;if(t)(a=this.isWindow?h:h-n)<0&&(this.isWindow?window.scrollTo(0,pageYOffset+a):this.element.scrollTo(0,this.element.scrollTop+a));else{var u=this.isWindow?window.innerHeight:r;(a=this.isWindow?h+d:h-n+d)>u&&(this.isWindow?window.scrollTo(0,pageYOffset+(a-u)):this.element.scrollTo(0,this.element.scrollTop+(a-u)))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,this.isWindow?window.scrollTo(0,pageYOffset-a):this.element.scrollTo(0,this.element.scrollTop-a);else if(t)if(this.showHeader&&this.headerEle){var p=o?o.top:l.top,m=this.headerEle.getBoundingClientRect();a=m.top<0?m.height-p:0,this.isWindow?window.scrollTo(0,pageYOffset-a):this.element.scrollTo(0,0)}else this.fields.groupBy&&(a=this.isWindow?o.top<0?o.top:0:n-l.top+o.height,this.isWindow?window.scrollTo(0,pageYOffset+a):this.element.scrollTo(0,this.element.scrollTop-a))}},u.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var i=!t.isNullOrUndefined(this.curUL.querySelector("."+c.hasChild)),s=this.curUL.querySelector("."+c.focused);i&&s&&(s.classList.remove(c.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(s),this.removeHover()),this.setSelectLI(s,e))}},u.prototype.spaceKeyHandler=function(e){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelector("."+c.focused);if(!t.isNullOrUndefined(i)&&t.isNullOrUndefined(i.querySelector("."+c.checked))){var s={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:i};this.checkInternally(s,s.item.querySelector("."+c.checkboxWrapper))}else this.uncheckItem(i)}},u.prototype.keyActionHandler=function(e){switch(e.preventDefault(),e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 9:this.tabFocus(e);break;case 32:this.spaceKeyHandler(e)}},u.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},u.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+c.focused),t=this.curUL.querySelector("[aria-selected = true]");e&&!this.showCheckBox&&(e.classList.remove(c.focused),t&&t.classList.add(c.selected))}},u.prototype.wireEvents=function(){t.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),t.EventHandler.add(this.element,"click",this.clickHandler,this),this.enableVirtualization||(t.EventHandler.add(this.element,"mouseover",this.hoverHandler,this),t.EventHandler.add(this.element,"mouseout",this.leaveHandler,this)),t.EventHandler.add(this.element,"focusout",this.focusout,this),this.touchModule=new t.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)})},u.prototype.unWireEvents=function(){t.EventHandler.remove(this.element,"click",this.clickHandler),this.enableVirtualization||(t.EventHandler.remove(this.element,"mouseover",this.hoverHandler),t.EventHandler.remove(this.element,"mouseout",this.leaveHandler)),t.EventHandler.remove(this.element,"mouseover",this.hoverHandler),t.EventHandler.remove(this.element,"mouseout",this.leaveHandler),this.touchModule.destroy()},u.prototype.tabFocus=function(e){if(Object.keys(this.dataSource).length&&this.curUL){if(!this.curUL.querySelector("."+c.selected)&&this.curUL||this.showCheckBox){var i=this.curUL.querySelector("."+c.listItem);if(i.classList.contains(c.hasChild)||this.showCheckBox){var s=this.curUL.querySelector("."+c.focused);t.isNullOrUndefined(s)&&i.classList.add(c.focused)}else this.setSelectLI(i,e)}}},u.prototype.removeFocus=function(){for(var e=0,t=this.element.querySelectorAll("."+c.focused);e<t.length;e++){t[e].classList.remove(c.focused)}},u.prototype.removeHover=function(){var e=this.element.querySelector("."+c.hover);e&&e.classList.remove(c.hover)},u.prototype.removeSelect=function(e){if(t.isNullOrUndefined(e))for(var i=0,s=this.element.querySelectorAll("."+c.selected);i<s.length;i++){var n=s[i];this.showCheckBox&&n.querySelector("."+c.checked)||(n.setAttribute("aria-selected","false"),n.classList.remove(c.selected))}else e.classList.remove(c.selected),e.setAttribute("aria-selected","false")},u.prototype.isValidLI=function(e){return e&&e.classList.contains(c.listItem)&&!e.classList.contains(c.groupListItem)&&!e.classList.contains(c.disable)},u.prototype.setCheckboxLI=function(e,i){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+c.focused)&&this.curUL.querySelector("."+c.focused).classList.remove(c.focused),e.classList.add(c.focused);var s=e.querySelector("."+c.checkboxWrapper),n=s.querySelector("."+c.checkboxIcon+"."+c.icon);if(this.removeHover(),n.classList.contains(c.checked)?(n.classList.remove(c.checked),e.classList.remove(c.selected),e.setAttribute("aria-selected","false")):(n.classList.add(c.checked),e.classList.add(c.selected),e.setAttribute("aria-selected","true")),s.setAttribute("aria-checked",n.classList.contains(c.checked)?"true":"false"),i){var r=this.selectEventData(e,i);t.merge(r,{isChecked:n.classList.contains(c.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,i),this.trigger("select",r)}this.setSelectedItemData(e),this.renderSubList(e)}},u.prototype.selectEventData=function(e,i){var s,r=this.getItemData(e),l=n(r,this.listBaseOption.fields);s=!t.isNullOrUndefined(r)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:l&&l[this.listBaseOption.fields.text],data:r};var a={};return t.merge(a,s),i&&t.merge(a,{isInteracted:!0,event:i,index:Array.prototype.indexOf.call(this.curUL.children,e)}),a},u.prototype.setSelectedItemData=function(e){var i=this.getItemData(e),s=n(i,this.listBaseOption.fields);t.isNullOrUndefined(i)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:e,text:s&&s[this.listBaseOption.fields.text],data:i}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},u.prototype.setSelectLI=function(e,t){if(this.isValidLI(e)&&!e.classList.contains(c.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(c.selected),e.setAttribute("aria-selected","true"),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var i=this.selectEventData(e,t);this.trigger("select",i),this.selectedLI=e,this.renderSubList(e)}},u.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(c.hover)&&this.enable){var i=this.element.querySelectorAll("."+c.hover);i&&i.length&&t.removeClass(i,c.hover),e.classList.contains(c.selected)&&!this.showCheckBox||e.classList.add(c.hover)}},u.prototype.hoverSiblingLI=function(t){var i,s=this.curUL.querySelector("."+c.hover);if(s||(s=this.curUL.querySelector("."+c.selected)),s)i=e.ListBase.getSiblingLI(this.curUL.querySelectorAll("."+c.listItem),s,t);else if(t){var n=this.curUL.querySelectorAll("."+c.listItem);i=n[n.length-1]}else i=this.curUL.querySelector("."+c.listItem);this.setHoverLI(i)},u.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var t=this.localData,i=0,s=e;i<s.length;i++){var r=s[i],l={};l[this.fields.id]=r,this.curDSJSON=this.findItemFromDS(t,l);var a=n(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?a[this.fields.child]:t}return t}return this.localData},u.prototype.getItemData=function(e){var i,s=this.getElementUID(e);return i=t.isNullOrUndefined(this.curUL.querySelector("."+c.hasChild))&&this.fields.groupBy?this.curViewDS:this.dataSource,this.findItemFromDS(i,s)},u.prototype.findItemFromDS=function(e,i,s){var r,l=this;return e&&e.length&&i?e.some(function(a){var o=n(a,l.listBaseOption.fields);if(!i[l.fields.id]&&!i[l.fields.text]||i[l.fields.id]&&(!t.isNullOrUndefined(o[l.fields.id])&&o[l.fields.id].toString())!==i[l.fields.id].toString()||i[l.fields.text]&&o[l.fields.text]!==i[l.fields.text])if("object"!=typeof a&&-1!==e.indexOf(a))r=s?e:a;else if(!t.isNullOrUndefined(i[l.fields.id])&&t.isNullOrUndefined(o[l.fields.id])){var c=l.element.querySelector('[data-uid="'+i[l.fields.id]+'"]');c&&c.innerText.trim()===o[l.fields.text]&&(r=a)}else o.hasOwnProperty(l.fields.child)&&o[l.fields.child].length&&(r=l.findItemFromDS(o[l.fields.child],i,s));else r=s?e:a;return!!r}):r=e,r},u.prototype.getQuery=function(){var t=[],s=this.query?this.query:new i.Query;if(!this.query){for(var n=0,r=Object.keys(this.fields.properties);n<r.length;n++){var l=r[n];"tableName"!==l&&this.fields[l]&&this.fields[l]!==e.ListBase.defaultMappedFields[l]&&-1===t.indexOf(this.fields[l])&&t.push(this.fields[l])}s.select(t),this.fields.properties.hasOwnProperty("tableName")&&s.from(this.fields.tableName)}return s},u.prototype.setViewDataSource=function(t){void 0===t&&(t=this.localData),t&&this.fields.groupBy?this.curViewDS=e.ListBase.groupDataSource(t,this.listBaseOption.fields,this.sortOrder):t&&"None"!==this.sortOrder?this.curViewDS=e.ListBase.getDataSource(t,e.ListBase.addSorting(this.sortOrder,this.fields.sortBy)):this.curViewDS=t},u.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},u.prototype.setLocalData=function(){var s=this;if(this.trigger("actionBegin"),this.dataSource instanceof i.DataManager)this.dataSource.executeQuery(this.getQuery()).then(function(e){s.isDestroyed||(s.localData=e.result,s.renderList(),s.trigger("actionComplete",e))}).catch(function(e){s.isDestroyed||s.trigger("actionFailure",e)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var n=this.element.querySelector("ul");n&&(t.remove(n),this.setProperties({dataSource:e.ListBase.createJsonFromElement(n)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},u.prototype.reRender=function(){this.element.innerHTML="",this.headerEle=this.ulElement=this.liCollection=void 0,this.setLocalData(),this.header()},u.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},u.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=e.ListBase.createList(this.createElement,this.curViewDS,this.listBaseOption),this.liCollection=this.curUL.querySelectorAll("."+c.listItem)},u.prototype.renderSubList=function(i){var s=i.getAttribute("data-uid");if(i.classList.contains(c.hasChild)&&s){var r=t.closest(i.parentNode,"."+c.parentItem),l=this.element.querySelector("[pid='"+s+"']");if(this.curDSLevel.push(s),this.setViewDataSource(this.getSubDS()),!l){var a=this.curViewDS;(l=e.ListBase.createListFromJson(this.createElement,a,this.listBaseOption,this.curDSLevel.length)).setAttribute("pID",s),l.style.display="none",this.renderIntoDom(l)}if(this.switchView(r,l),this.liCollection=this.curUL.querySelectorAll("."+c.listItem),this.selectedItems){var o=n(this.selectedItems.data,this.listBaseOption.fields);this.header(o[this.listBaseOption.fields.text],!0)}this.selectedLI=void 0}},u.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},u.prototype.renderList=function(e){this.setViewDataSource(e),this.enableVirtualization&&Object.keys(this.dataSource).length?((this.template||this.groupTemplate)&&(this.listBaseOption.template=null,this.listBaseOption.groupTemplate=null,this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule)),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:c.content}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement))},u.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},u.prototype.render=function(){this.element.classList.add(c.root),t.attributes(this.element,{role:"list",tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=t.rippleEffect(this.element,{selector:"."+c.listItem})},u.prototype.destroy=function(){this.unWireEvents();var e=[c.root,this.cssClass,c.disable,"e-rtl","e-has-header","e-control"];t.removeClass([this.element],e),this.rippleFn(),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.element.innerHTML="",this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,d.prototype.destroy.call(this)},u.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var s=n(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();var r=this.element.querySelector("[data-uid='"+e+"']");r.classList.add(c.focused),this.showCheckBox&&r.querySelector("."+c.checkboxIcon).classList.contains(c.checked)?r.setAttribute("aria-selected","true"):(r.classList.remove(c.selected),r.setAttribute("aria-selected","false")),this.liCollection=this.curUL.querySelectorAll("."+c.listItem),this.header(this.curDSLevel.length?s:this.headerTitle,!!this.curDSLevel.length)}},u.prototype.selectItem=function(e){t.isNullOrUndefined(e)||(this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):this.setSelectLI(this.getLiFromObjOrElement(e)))},u.prototype.getLiFromObjOrElement=function(e){var i;if(!t.isNullOrUndefined(e))if("string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0])if(e instanceof Element){for(var s=e.getAttribute("data-uid").toString(),r=0;r<this.liCollection.length;r++)if(this.liCollection[r].getAttribute("data-uid").toString()===s){i=this.liCollection[r];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+c.listItem),function(t){return t.innerText.trim()===e.toString()&&(i=t,!0)});else{var l=this.getItemData(e),a=n(l,this.listBaseOption.fields);if(l&&(i=this.element.querySelector('[data-uid="'+a[this.fields.id]+'"]'),t.isNullOrUndefined(i))){var o=this.element.querySelectorAll("."+c.listItem);for(r=0;r<o.length;r++)o[r].innerText.trim()===l.text&&(i=o[r])}}return i},u.prototype.selectMultipleItems=function(e){if(!t.isNullOrUndefined(e))for(var i=0;i<e.length;i++)t.isNullOrUndefined(e[i])||this.selectItem(e[i])},u.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},u.prototype.getSelectedItems=function(){if(this.selectedId=[],this.enableVirtualization)return this.virtualizationModule.getSelectedItems();if(this.showCheckBox){var e=this.curUL.getElementsByClassName(c.selected),i=[],s=[];this.selectedId=[];for(var r=[],l=0;l<e.length;l++)if("string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0])i.push(e[l].innerText.trim());else{var a=this.getItemData(e[l]),o=n(a,this.listBaseOption.fields);this.isNestedList?r.push({data:a,parentId:this.getParentId()}):s.push(a),o?(i.push(o[this.listBaseOption.fields.text]),this.selectedId.push(o[this.listBaseOption.fields.id])):(i.push(void 0),this.selectedId.push(void 0))}return"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,data:this.dataSource,text:i}:this.isNestedList?{item:e,data:r,text:i}:{item:e,data:s,text:i}}var h=this.element.getElementsByClassName(c.selected)[0];o=n(this.getItemData(h),this.listBaseOption.fields);return"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?t.isNullOrUndefined(h)?void 0:{item:h,data:this.dataSource,text:h.innerText.trim()}:t.isNullOrUndefined(o)||t.isNullOrUndefined(h)?void 0:(this.selectedId.push(o[this.listBaseOption.fields.id]),{text:o[this.listBaseOption.fields.text],item:h,data:this.getItemData(h)})},u.prototype.findItem=function(e){return this.getItemData(e)},u.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},u.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},u.prototype.setItemState=function(e,t){var i=this.getItemData(e),s=n(i,this.listBaseOption.fields);if(i){var r=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]');t?(r&&r.classList.remove(c.disable),delete i[this.fields.enabled]):t||(r&&r.classList.add(c.disable),i[this.fields.enabled]=!1)}},u.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},u.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},u.prototype.showHideItem=function(e,t,i){var s=this.getItemData(e),r=n(s,this.listBaseOption.fields);if(s){var l=this.element.querySelector('[data-uid="'+r[this.fields.id]+'"]');l&&(l.style.display=i),t?s[this.fields.isVisible]=!1:delete s[this.fields.isVisible]}},u.prototype.addItem=function(e,t){var i=this;if(void 0===t&&(t=void 0),e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t);else{var s=this.findItemFromDS(this.dataSource,t),r=n(s,this.listBaseOption.fields)[this.fields.child];r||(r=[]),r=r.concat(e),s instanceof Array?(e.forEach(function(e){if(i.dataSource.push(e),i.setViewDataSource(i.dataSource),i.ulElement){var t=i.curViewDS.indexOf(e);i.addListItem(e,t);var s=i.curViewDS[t-1];s&&s.isHeader&&1===s.items.length&&i.addListItem(s,t-1)}else i.reRender()}),this.liCollection=this.curUL.querySelectorAll("."+c.listItem)):(s[this.fields.child]=r,this.reRender())}},u.prototype.addListItem=function(t,i){var s=this.getLiFromObjOrElement(this.curViewDS[i+1])||this.getLiFromObjOrElement(this.curViewDS[i+2])||null,n=e.ListBase.createListItemFromJson(this.createElement,[t],this.listBaseOption);this.ulElement.insertBefore(n[0],s)},u.prototype.removeItem=function(e){this.enableVirtualization?this.virtualizationModule.removeItem(e):this.removeItemFromList(e)},u.prototype.removeItemFromList=function(e){var i,s=e instanceof Element?this.getElementUID(e):e;if(i=this.findItemFromDS(this.dataSource,s,!0)){var n=void 0;n=this.findItemFromDS(i,s);var r=this.curViewDS.indexOf(n);this.fields.groupBy&&this.curViewDS[r-1]&&this.curViewDS[r-1].isHeader&&1===this.curViewDS[r-1].items.length&&t.detach(this.getLiFromObjOrElement(this.curViewDS[r-1])),this.getLiFromObjOrElement(e)&&t.detach(this.getLiFromObjOrElement(e));var l=i.indexOf(n);i.splice(l,1),this.setViewDataSource(this.dataSource),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+c.listItem))}},u.prototype.removeMultipleItems=function(e){if(e.length)for(var t=0;t<e.length;t++)this.enableVirtualization?this.removeItem(e[t]):this.removeItemFromList(e[t])},u.prototype.getModuleName=function(){return"listview"},u.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},u.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition"])},l([t.Property()],u.prototype,"cssClass",void 0),l([t.Property(!1)],u.prototype,"enableVirtualization",void 0),l([t.Property({})],u.prototype,"htmlAttributes",void 0),l([t.Property(!0)],u.prototype,"enable",void 0),l([t.Property([])],u.prototype,"dataSource",void 0),l([t.Property()],u.prototype,"query",void 0),l([t.Complex(e.ListBase.defaultMappedFields,h)],u.prototype,"fields",void 0),l([t.Property({effect:"SlideLeft",duration:400,easing:"ease"})],u.prototype,"animation",void 0),l([t.Property("None")],u.prototype,"sortOrder",void 0),l([t.Property(!1)],u.prototype,"showIcon",void 0),l([t.Property(!1)],u.prototype,"showCheckBox",void 0),l([t.Property("Left")],u.prototype,"checkBoxPosition",void 0),l([t.Property("")],u.prototype,"headerTitle",void 0),l([t.Property(!1)],u.prototype,"showHeader",void 0),l([t.Property("")],u.prototype,"height",void 0),l([t.Property("")],u.prototype,"width",void 0),l([t.Property(null)],u.prototype,"template",void 0),l([t.Property(null)],u.prototype,"headerTemplate",void 0),l([t.Property(null)],u.prototype,"groupTemplate",void 0),l([t.Event()],u.prototype,"select",void 0),l([t.Event()],u.prototype,"actionBegin",void 0),l([t.Event()],u.prototype,"actionComplete",void 0),l([t.Event()],u.prototype,"actionFailure",void 0),u=l([t.NotifyPropertyChanges],u)}(t.Component),u=function(){function i(e){this.listViewInstance=e}return i.prototype.uiVirtualization=function(){var i=this.listViewInstance.curViewDS,s=i.slice(0,1);this.listViewInstance.ulElement=this.listViewInstance.curUL=e.ListBase.createList(this.listViewInstance.createElement,s,this.listViewInstance.listBaseOption),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:c.content}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1,this.wireScrollEvent(!1);var n=i.slice(1,this.domItemCount),r=e.ListBase.createListItemFromJson(this.listViewInstance.createElement,n,this.listViewInstance.listBaseOption);t.append(r,this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(i).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight,this.listDiff=0,this.uiIndicesInitialization()},i.prototype.wireScrollEvent=function(e){e?this.listViewInstance.isWindow?window.removeEventListener("scroll",this.onVirtualScroll):t.EventHandler.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):t.EventHandler.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},i.prototype.ValidateItemCount=function(e){var t=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):Math.round(this.listViewInstance.height/this.listItemHeight*1.5);return t>e&&(t=e),t},i.prototype.uiIndicesInitialization=function(){var e=this;this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]},this.listViewInstance.curViewDS.forEach(function(i,s){e.listViewInstance.showCheckBox&&i[e.listViewInstance.fields.isChecked]&&e.uiIndices.activeIndices.push(s),t.isNullOrUndefined(i[e.listViewInstance.fields.enabled])||i[e.listViewInstance.fields.enabled]||e.uiIndices.disabledItemIndices.push(s)})},i.prototype.getscrollerHeight=function(){return this.listViewInstance.isWindow?pageYOffset-this.startingHeight<=0?0:pageYOffset-this.startingHeight:this.listViewInstance.element.scrollTop-this.startingHeight<=0?0:this.listViewInstance.element.scrollTop-this.startingHeight},i.prototype.onVirtualUiScroll=function(){t.isNullOrUndefined(this.startingHeight)&&(this.listViewInstance.isWindow?this.startingHeight=document.documentElement.getBoundingClientRect().height-this.listViewInstance.ulElement.getBoundingClientRect().height:this.startingHeight=this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=0);var e=this.getscrollerHeight();if(this.topElementHeight=this.listItemHeight*Math.floor(e/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,s=e<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=s[0],this.bottomElementHeight=s[1],this.topElementHeight!==parseFloat(this.topElement.style.height)){if(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",e>this.scrollPosition){(i=this.topElementHeight/this.listItemHeight-this.listDiff)>this.expectedDomItemCount+5?this.onLongScroll(i,!0):this.onNormalScroll(i,!0)}else{var i;(i=this.listDiff-this.topElementHeight/this.listItemHeight)>this.expectedDomItemCount+5?this.onLongScroll(i,!1):this.onNormalScroll(i,!1)}this.listDiff=this.topElementHeight/this.listItemHeight,"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled()}this.scrollPosition=e;var s},i.prototype.onLongScroll=function(e,t){var i=this,s=t?this.uiFirstIndex+e:this.uiFirstIndex-e;Array.prototype.forEach.call(this.listViewInstance.ulElement.querySelectorAll("li"),function(e){i.updateUI(e,s),s++}),this.uiLastIndex=t?this.uiLastIndex+e:this.uiLastIndex-e,this.uiFirstIndex=t?this.uiFirstIndex+e:this.uiFirstIndex-e},i.prototype.onNormalScroll=function(e,t){if(t)for(var i=0;i<e;i++){var s=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,s,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<e;i++){s=--this.uiFirstIndex;var n=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,s,n),this.uiLastIndex--}},i.prototype.updateUiContent=function(i,s){var n=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(i.dataset.uid=e.ListBase.generateId(),i.getElementsByClassName(c.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[s].toString()):(i.dataset.uid=n[s][this.listViewInstance.fields.id]?n[s][this.listViewInstance.fields.id].toString():e.ListBase.generateId(),i.getElementsByClassName(c.listItemText)[0].innerHTML=n[s][this.listViewInstance.fields.text].toString()),this.listViewInstance.showIcon&&(i.querySelector("."+c.listIcon)&&t.detach(i.querySelector("."+c.listIcon)),this.listViewInstance.curViewDS[s][this.listViewInstance.fields.iconCss])){var r=i.querySelector("."+c.textContent),l=this.listViewInstance.createElement("div",{className:c.listIcon+" "+this.listViewInstance.curViewDS[s][this.listViewInstance.fields.iconCss]});r.insertBefore(l,i.querySelector("."+c.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+c.checkboxWrapper).cloneNode(!0));r=i.querySelector("."+c.textContent);this.listViewInstance.curViewDS[s].isHeader?i.querySelector("."+c.checkboxWrapper)&&(i.classList.remove(c.checklist),r.classList.remove(c.checkbox),t.detach(i.querySelector("."+c.checkboxWrapper))):i.querySelector("."+c.checkboxWrapper)||(i.classList.add(c.checklist),r.classList.add(c.checkbox),r.insertBefore(this.checkListWrapper.cloneNode(!0),i.querySelector("."+c.listItemText)))}},i.prototype.changeElementAttributes=function(e,i){if(e.classList.remove(c.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(i)&&e.classList.add(c.disable),e.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(i)&&(e.style.display="none"),this.listViewInstance.showCheckBox){var s=e.querySelector("."+c.checkboxWrapper);e.classList.remove(c.selected),e.classList.remove(c.focused),s&&(s.removeAttribute("aria-checked"),s.firstElementChild.classList.remove(c.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(i)&&!this.listViewInstance.curUL.querySelector(c.selected)&&(e.classList.add(c.selected),s.firstElementChild.classList.add(c.checked),s.setAttribute("aria-checked","true"),this.activeIndex===i&&e.classList.add(c.focused))}else e.classList.remove(c.selected),e.removeAttribute("aria-selected"),t.isNullOrUndefined(this.activeIndex)||this.activeIndex!==i||this.listViewInstance.curUL.querySelector(c.selected)||(e.classList.add(c.selected),e.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[i].isHeader?e.classList.contains(c.listItem)&&(e.classList.remove(c.listItem),e.setAttribute("role","group"),e.classList.add(c.groupListItem)):e.classList.contains(c.groupListItem)&&(e.classList.remove(c.groupListItem),e.setAttribute("role","listitem"),e.classList.add(c.listItem)))},i.prototype.findDSAndIndexFromId=function(e,t){var i=this,s={};return e.some(function(e,n){return!!(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id].toString()===(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id].toString())||t===e)&&(s.index=n,s.data=e,!0)}),s},i.prototype.getSelectedItems=function(){var e=this;if(!t.isNullOrUndefined(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var i=[],s=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var n=this.listViewInstance.curViewDS;return this.listViewInstance.showCheckBox?(this.uiIndices.activeIndices.forEach(function(e){i.push(n[e])}),{text:i,data:i,index:this.uiIndices.activeIndices.map(function(t){return e.listViewInstance.dataSource.indexOf(n[t])})}):{text:n[this.activeIndex],data:n[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(n[this.activeIndex])}}var r=this.listViewInstance.curViewDS,l=this.listViewInstance.fields.text;return this.listViewInstance.showCheckBox?(this.uiIndices.activeIndices.forEach(function(e){s.push(r[e][l]),i.push(r[e])}),{text:s,data:i,index:this.uiIndices.activeIndices.map(function(t){return e.listViewInstance.dataSource.indexOf(r[t])})}):{text:r[this.activeIndex][this.listViewInstance.fields.text],data:r[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(r[this.activeIndex])}}},i.prototype.selectItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(Object.keys(t).length)if(this.activeIndex=t.index,this.listViewInstance.showCheckBox&&-1===this.uiIndices.activeIndices.indexOf(t.index)&&this.uiIndices.activeIndices.push(t.index),this.listViewInstance.removeSelect(),this.listViewInstance.showCheckBox&&this.listViewInstance.curUL.querySelector("."+c.focused)&&this.listViewInstance.curUL.querySelector("."+c.focused).classList.remove(c.focused),this.listViewInstance.getLiFromObjOrElement(e))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e));else{var i=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])i={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var s=this.listViewInstance.curViewDS;i={text:s[this.activeIndex][this.listViewInstance.fields.text],data:s[this.activeIndex],index:this.uiIndices.activeIndices}}this.listViewInstance.trigger("select",i)}},i.prototype.enableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index),1)},i.prototype.disableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.disabledItemIndices.indexOf(t.index)&&this.uiIndices.disabledItemIndices.push(t.index)},i.prototype.showItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index),1)},i.prototype.hideItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(t.index)&&this.uiIndices.hiddenItemIndices.push(t.index)},i.prototype.removeItem=function(e){var t,i=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(i).length&&(t=i.data,this.listViewInstance.curViewDS[i.index-1]&&this.listViewInstance.curViewDS[i.index-1].isHeader&&1===this.listViewInstance.curViewDS[i.index-1].items.length?(this.removeUiItem(i.index-1),this.removeUiItem(i.index-1)):this.removeUiItem(i.index));var s=this.listViewInstance.dataSource.indexOf(t);-1!==s&&(this.listViewInstance.dataSource.splice(s,1),this.listViewInstance.setViewDataSource(this.listViewInstance.dataSource))},i.prototype.setCheckboxLI=function(e,t){var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex,e.classList.contains(c.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},i.prototype.setSelectLI=function(e,t){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex},i.prototype.checkedItem=function(e){var t=this;e?(this.uiIndices.activeIndices=[],this.activeIndex=void 0,this.listViewInstance.curViewDS.forEach(function(e,i){e.isHeader||t.uiIndices.activeIndices.push(i)})):(this.activeIndex=void 0,this.uiIndices.activeIndices=[])},i.prototype.addUiItem=function(e){var t=this.listViewInstance.curViewDS;if(this.changeUiIndices(e,!0),this.activeIndex&&this.activeIndex>=e&&this.activeIndex++,this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(s=this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,e,s))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var s=void 0;s=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,s&&(this.updateUI(i,e,s),this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=parseFloat(this.topElement.style.height)/this.listItemHeight},i.prototype.removeUiItem=function(e){this.totalHeight-=this.listItemHeight;var i=this.listViewInstance.curViewDS[e],s=this.listViewInstance.getLiFromObjOrElement(i);if(this.listViewInstance.curViewDS.splice(e,1),this.activeIndex&&this.activeIndex>=e&&this.activeIndex--,s)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)t.detach(s),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(s.classList.contains(c.disable)&&(s.classList.remove(c.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e),1)),"none"===s.style.display&&(s.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e),1)),this.listViewInstance.showCheckBox&&s.classList.contains(c.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e),1);var n=s.querySelector("."+c.checkboxWrapper);n.removeAttribute("aria-checked"),n.firstElementChild.classList.remove(c.checked),s.classList.contains(c.focused)&&(s.classList.remove(c.focused),this.activeIndex=void 0)}else s.classList.contains(c.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(s,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(s,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(s,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(e,!1),this.listDiff=parseFloat(this.topElement.style.height)/this.listItemHeight},i.prototype.changeUiIndices=function(e,t){var i=this;Object.keys(this.uiIndices).forEach(function(s){i.uiIndices[s]=i.uiIndices[s].map(function(i){return i>=e?t?++i:--i:i})})},i.prototype.addItem=function(e,i){var s=this;e.forEach(function(e){if(s.listViewInstance.dataSource.push(e),s.listViewInstance.setViewDataSource(s.listViewInstance.dataSource),s.domItemCount)if(s.domItemCount<s.expectedDomItemCount)s.wireScrollEvent(!0),t.detach(s.listViewInstance.contentContainer),s.uiVirtualization();else{var i=s.listViewInstance.curViewDS.indexOf(e);s.addUiItem(i);var n=s.listViewInstance.curViewDS[i-1];n&&n.isHeader&&1===n.items.length&&s.addUiItem(i-1)}else s.uiVirtualization()})},i.prototype.createUIItem=function(e){var t=this.listViewInstance.createElement("div"),i='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>";t.innerHTML=this.listViewInstance.template||i;var s=t.getElementsByTagName("*"),n=this.listViewInstance.createElement("div");this.listViewInstance.fields.groupBy&&(n.innerHTML=this.listViewInstance.groupTemplate||i);var r=n.getElementsByTagName("*");e.curData.isHeader&&(this.headerData=e.curData),this.templateData=e.curData.isHeader?e.curData.items[0]:e.curData,e.item.innerHTML="",e.item.context={data:e.curData,nodes:{flatTemplateNodes:[],groupTemplateNodes:[]}};for(var l=0;l<s.length;l++)this.compileTemplate(s[l],e.item,!1);for(l=0;l<r.length;l++)this.compileTemplate(r[l],e.item,!0);e.item.context.template=e.curData.isHeader?t.firstElementChild:n.firstElementChild,e.item.context.type=e.curData.isHeader?"flatList":"groupList";var a=e.curData.isHeader?n:t;e.item.insertBefore(a.firstElementChild,null)},i.prototype.compileTemplate=function(e,t,i){this.textProperty(e,t,i),this.classProperty(e,t,i),this.attributeProperty(e,t,i)},i.prototype.onChange=function(e,i){i.context.data=e;var s=i.context.nodes.groupTemplateNodes,n=i.context.nodes.flatTemplateNodes;if(!t.isNullOrUndefined(e.isHeader)&&e.isHeader&&"groupList"===i.context.type){var r=i.firstElementChild;t.detach(i.firstElementChild),i.insertBefore(i.context.template,null),i.context.template=r,i.context.type="flatList",s.forEach(function(t){return t.onChange(e)})}else if(e.isHeader||"flatList"!==i.context.type)e.isHeader?s.forEach(function(t){return t.onChange(e)}):n.forEach(function(t){return t.onChange(e)});else{r=i.firstElementChild;t.detach(i.firstElementChild),i.insertBefore(i.context.template,null),i.context.template=r,i.context.type="groupList",n.forEach(function(t){return t.onChange(e)})}},i.prototype.updateContextData=function(e,t,i){i?e.context.nodes.groupTemplateNodes.push(t):e.context.nodes.flatTemplateNodes.push(t)},i.prototype.classProperty=function(e,t,i){for(var s,n=this,r=new RegExp("\\${([^}]*)}","g"),l=[];null!==s;){var a=r.exec(e.className);l.push(a),null===(s=a)&&l.pop()}l&&l.length&&l.forEach(function(s){var r;r=-1!==s[1].indexOf("?")&&-1!==s[1].indexOf(":")?new Function("data","return "+s[1].replace(/\$/g,"data.")):new Function("data","return data."+s[1]);var l={};l.bindedvalue=r(i?n.headerData:n.templateData),l.onChange=function(t){e.classList.remove(l.bindedvalue),e.classList.add(r(t)),l.bindedvalue=r(t)},s[0].split(" ").forEach(function(t){e.classList.remove(t)}),e.classList.add(l.bindedvalue),n.updateContextData(t,l,i)})},i.prototype.attributeProperty=function(e,t,i){for(var s=this,n=[],r=0;r<e.attributes.length;r++)n.push(e.attributes[r].nodeName);-1!==n.indexOf("class")&&n.splice(n.indexOf("class"),1),n.forEach(function(n){var r,l,a=new RegExp("\\${([^}]*)}","g").exec(n)||[],o=new RegExp("\\${([^}]*)}","g").exec(e.getAttribute(n))||[];if(a.length||o.length){a[1]&&(r=new Function("data","return data."+a[1])),o[1]&&(l=-1!==o[1].indexOf("?")&&-1!==o[1].indexOf(":")?new Function("data","return "+o[1].replace(/\$/g,"data.")):new Function("data","return data."+o[1]));var c={};c.bindedvalue=i?[void 0===a[1]?void 0:r(s.headerData),void 0===o[1]?void 0:l(s.headerData)]:[void 0===a[1]?void 0:r(s.templateData),void 0===o[1]?void 0:l(s.templateData)],c.attrName=void 0===c.bindedvalue[0]?n:c.bindedvalue[0],c.onChange=function(t){var i=void 0===c.bindedvalue[1]?e.getAttribute(c.attrName):l(t);e.removeAttribute(c.attrName),c.attrName=void 0===c.bindedvalue[0]?c.attrName:r(t),e.setAttribute(c.attrName,i),c.bindedvalue=[void 0===c.bindedvalue[0]?void 0:r(t),void 0===c.bindedvalue[1]?void 0:l(t)]};var h=void 0===c.bindedvalue[1]?e.getAttribute(n):c.bindedvalue[1];e.removeAttribute(n),e.setAttribute(c.attrName,h),s.updateContextData(t,c,i)}})},i.prototype.textProperty=function(e,t,i){for(var s,n=this,r=new RegExp("\\${([^}]*)}","g"),l=[];null!==s;){var a=r.exec(e.innerText);l.push(a),null===(s=a)&&l.pop()}var o=Array.prototype.some.call(e.children,function(e){return!!new RegExp("\\${([^}]*)}","g").exec(e.innerText)});l&&l.length&&!o&&l.forEach(function(s){var r,l={};r=-1!==s[1].indexOf("?")&&-1!==s[1].indexOf(":")?new Function("data","return "+s[1].replace(/\$/g,"data.")):new Function("data","return data."+s[1]),l.bindedvalue=r(i?n.headerData:n.templateData),l.onChange=function(t){e.innerText=e.innerText.replace(l.bindedvalue,r(t)),l.bindedvalue=r(t)},e.innerText=e.innerText.replace(s[0],l.bindedvalue),n.updateContextData(t,l,i)})},i.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&t.detach(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.listViewInstance.localData=this.listViewInstance.dataSource,this.listViewInstance.renderList()},i.prototype.updateUI=function(t,i,s){if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var n=this.listViewInstance.curViewDS[i];t.dataset.uid=n[this.listViewInstance.fields.id]?n[this.listViewInstance.fields.id].toString():e.ListBase.generateId(),this.onChange(n,t)}else this.updateUiContent(t,i);this.changeElementAttributes(t,i),s&&this.listViewInstance.ulElement.insertBefore(t,s)},i.prototype.getModuleName=function(){return"virtualization"},i.prototype.destroy=function(){this.wireScrollEvent(!0)},i}();e.classNames=c,e.FieldSettings=h,e.ListView=d,e.Virtualization=u,e.getFieldValues=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-lists.umd.min.js.map
